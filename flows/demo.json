[{"id":"62218147.6d666","type":"http response","z":"bf4c7741.bf0e58","name":"","x":630,"y":1220,"wires":[]},{"id":"f8012c6b.f80b9","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/appinfo","method":"get","x":90,"y":1220,"wires":[["74b36f83.60cd5"]]},{"id":"b78d8db8.db135","type":"template","z":"bf4c7741.bf0e58","name":"appinfo","field":"payload","fieldType":"msg","syntax":"mustache","template":"<p>\nApplication name: <b>{{payload.name}}</b>\n<br/>Application version: <b>{{payload.version}}</b>\n<br/>Platform version: <b>{{payload.platformversion}}</b>\n<br/>Platform encoding: <b>{{payload.encoding}}</b>\n<br/>Server: <b>{{payload.server}}</b>\n</p>","x":460,"y":1223,"wires":[["62218147.6d666"]]},{"id":"ed9d8e8d.695f5","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":450,"y":1280,"wires":[]},{"id":"74b36f83.60cd5","type":"simplicite-session","z":"bf4c7741.bf0e58","name":"appinfo","server":"6c21fa80.1abd34","action":"appinfo","x":280,"y":1220,"wires":[["b78d8db8.db135","ed9d8e8d.695f5"]]},{"id":"710125ec.67f72c","type":"http response","z":"bf4c7741.bf0e58","name":"","x":630,"y":1340,"wires":[]},{"id":"4148e179.dadfb","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/sysinfo","method":"get","swaggerDoc":"","x":90,"y":1340,"wires":[["af283e24.77e08"]]},{"id":"cbc8600e.91165","type":"template","z":"bf4c7741.bf0e58","name":"sysinfo","field":"payload","fieldType":"msg","syntax":"mustache","template":"<p>\nObject cache: <b>{{payload.cacheobject}} / {{payload.cacheobjectmax}}</b>\n<br/>Grant cache: <b>{{payload.cachegrant}} / {{payload.cachegrantmax}}</b>\n<br/>Heap: <b>Used {{payload.heapsize}}Kb, Free {{payload.heapfreesize}}Kb, Max {{payload.heapsize}}Kb</b>\n<br/>Disk: <b>DBDoc {{payload.dirdbdoc}}, Cache {{payload.dircache}}Kb, Recycle bin {{payload.dirrecyclebin}}Kb, Free {{payload.diskfree}}Kb</b>\n</p>","x":460,"y":1340,"wires":[["710125ec.67f72c"]]},{"id":"8bd37a05.96c648","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":450,"y":1400,"wires":[]},{"id":"af283e24.77e08","type":"simplicite-session","z":"bf4c7741.bf0e58","name":"sysinfo","server":"6c21fa80.1abd34","action":"sysinfo","x":280,"y":1340,"wires":[["cbc8600e.91165","8bd37a05.96c648"]]},{"id":"464872b9.384d0c","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/grant","method":"get","x":80,"y":1100,"wires":[["c85cdfe2.e946b"]]},{"id":"7a5a7ab6.ac4ee4","type":"http response","z":"bf4c7741.bf0e58","name":"","x":730,"y":1100,"wires":[]},{"id":"afc9d901.da3e78","type":"template","z":"bf4c7741.bf0e58","name":"grant","field":"payload","fieldType":"msg","syntax":"mustache","template":"Hello <b>{{payload.firstname}} {{payload.lastname}}</b> (<i>{{payload.login}}</i>)!\n{{#payload.picture}}\n<br/><img src=\"data:{{mime}};base64,{{content}}\"/>\n{{/payload.picture}}\n\n","x":570,"y":1100,"wires":[["7a5a7ab6.ac4ee4"]]},{"id":"f016dde.ed9b02","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":510,"y":1160,"wires":[]},{"id":"6c53463d.6e9638","type":"simplicite-session","z":"bf4c7741.bf0e58","name":"grant","server":"6c21fa80.1abd34","action":"grant","x":410,"y":1100,"wires":[["afc9d901.da3e78","f016dde.ed9b02"]]},{"id":"c85cdfe2.e946b","type":"function","z":"bf4c7741.bf0e58","name":"grant","func":"msg.payload = { \n\tparameters: {\n\t\tinlinePicture: true\n\t}\n};\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":1100,"wires":[["6c53463d.6e9638"]]},{"id":"ef240f1d.2b88c","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/products","method":"get","x":100,"y":260,"wires":[["d5805d71.f5e"]]},{"id":"d5805d71.f5e","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload = {\n\taction: \"search\",\n\tparameters: {\n\t\tinlineThumbs: true,\n\t},\n\tfilters: {\n\t\t/*demoPrdAvailable: true*/\n\t}\n};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":260,"wires":[["349abbf.e1c0c44"]]},{"id":"349abbf.e1c0c44","type":"simplicite-object","z":"bf4c7741.bf0e58","name":"","server":"27652a29.8ec866","objectname":"DemoProduct","action":"","x":480,"y":260,"wires":[["e87ed48e.906ac8","e6913848.61d278"]]},{"id":"e87ed48e.906ac8","type":"template","z":"bf4c7741.bf0e58","name":"products","field":"payload","fieldType":"msg","syntax":"mustache","template":"<div class=\"row\">\n\t<div class=\"col-md-12\">\n\t\t<h3>Products <button class=\"btn btn-xs btn-default pull-right\" onclick=\"products();\"><span class=\"glyphicon glyphicon-refresh\"></span> Refresh</button></h3>\n\t</div>\n{{#payload.list}}\n\t<div class=\"col-md-6\">\n\t\t<div class=\"panel panel-info\">\n\t\t\t<div class=\"panel-heading\"><h4><span class=\"glyphicon glyphicon-shopping-cart\"></span> {{demoPrdSupId__demoSupCode}} / {{demoPrdName}}</h4></div>\n\t\t\t<div class=\"panel-body\">\n\t\t\t\t{{#demoPrdPicture}}\n\t\t\t\t<img src=\"data:{{mime}};base64,{{thumbnail}}\" style=\"margin: 5px; float: left;\"/>\n\t\t\t\t{{/demoPrdPicture}}\n\t\t\t\t<p>{{{demoPrdDescription}}}</p>\n\t\t\t\t<div class=\"badge badge-lg pull-right\">$ {{demoPrdUnitPrice}}<!-- &euro;--></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{{/payload.list}}\n</div>","x":660,"y":260,"wires":[["5129188b.020398"]]},{"id":"5129188b.020398","type":"http response","z":"bf4c7741.bf0e58","name":"","x":830,"y":260,"wires":[]},{"id":"63f3cbb.6efa234","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/news","method":"get","x":80,"y":40,"wires":[["48a21df7.f00c44"]]},{"id":"759ede7a.cb598","type":"http response","z":"bf4c7741.bf0e58","name":"","x":770,"y":40,"wires":[]},{"id":"c5b67d2f.e0f29","type":"template","z":"bf4c7741.bf0e58","name":"news","field":"payload","fieldType":"msg","syntax":"mustache","template":"<div class=\"row\">\n\t<div class=\"col-md-12\">\n\t\t<h3>News <button class=\"btn btn-xs btn-default pull-right\" onclick=\"news();\"><span class=\"glyphicon glyphicon-refresh\"></span> Refresh</button></h3>\n\t</div>\n{{#payload}}\n\t<div class=\"col-md-12\">\n\t\t<div class=\"panel panel-warning\">\n\t\t\t<div class=\"panel-heading\"><span class=\"glyphicon glyphicon-bullhorn\"></span> {{title}}</div>\n\t\t\t<div class=\"panel-body\">\n\t\t\t\t{{#image}}\n\t\t\t\t<img src=\"data:{{mime}};base64,{{content}}\" style=\"margin: 5px; float: left;\"/>\n\t\t\t\t{{/image}}\n\t\t\t\t<p>{{content}}</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{{/payload}}\n</div>\n","x":610,"y":40,"wires":[["759ede7a.cb598"]]},{"id":"48a21df7.f00c44","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload = {\n\tparameters: {\n\t\tinlineImages: true\n\t}\n};\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":40,"wires":[["4e53e390.312b2c"]]},{"id":"4e53e390.312b2c","type":"simplicite-session","z":"bf4c7741.bf0e58","name":"news","server":"27652a29.8ec866","action":"news","x":430,"y":40,"wires":[["c5b67d2f.e0f29","12057926.9e93b7"]]},{"id":"12057926.9e93b7","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":550,"y":100,"wires":[]},{"id":"e6913848.61d278","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":650,"y":320,"wires":[]},{"id":"5005d0ea.c4f21","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/demo","method":"get","swaggerDoc":"","x":90,"y":200,"wires":[["9782fc25.32ed5"]]},{"id":"ef2fcae8.0e6508","type":"template","z":"bf4c7741.bf0e58","name":"demo","field":"payload","fieldType":"msg","syntax":"mustache","template":"<html>\n<head>\n<title>Simplicit&eacute; NodeRED demo</title>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n<link rel=\"shortcut icon\" href=\"{{{payload.resourcesURL}}}/logos/favicon.ico\"/>\n<link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" rel=\"stylesheet\"/>\n</head>\n<body>\n<div class=\"container\">\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12 well\" style=\"text-align: center; margin-top: 10px;\">\n\t\t\t<img src=\"{{{payload.resourcesURL}}}/logos/logo500.png\"/>\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div id=\"products\" class=\"col-md-9\"></div>\n\t\t<div id=\"news\" class=\"col-md-3\"></div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12\" style=\"text-align: center;\"><hr/>&copy; Simplicit&eacute; Software</div>\n\t</div>\n</div>\n<script src=\"https://code.jquery.com/jquery-2.2.4.min.js\"></script>\n<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n<script type=\"text/javascript\">\nfunction products() { $(\"#products\").text(\"Loading...\").load(\"/products\"); }\nfunction news() { $(\"#news\").text(\"Loading...\").load(\"/news\"); }\n$(document).ready(function() { products(); news(); });\n</script>\n</body>\n</html>\n","x":450,"y":200,"wires":[["74ae3d98.3e0fe4"]]},{"id":"74ae3d98.3e0fe4","type":"http response","z":"bf4c7741.bf0e58","name":"","x":630,"y":200,"wires":[]},{"id":"9782fc25.32ed5","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload = {\n    resourcesURL: \"https://www.simplicite.io/resources/\"\n};\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":200,"wires":[["ef2fcae8.0e6508"]]},{"id":"26ca662b.bb414a","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/restaurantsdemo","method":"get","swaggerDoc":"","x":120,"y":440,"wires":[["62dd9b79.f971b4"]]},{"id":"c53a0f94.db433","type":"template","z":"bf4c7741.bf0e58","name":"restaurantsdemo","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n<head>\n<title>Simplicit&eacute; Advisor</title>\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n<link rel=\"shortcut icon\" href=\"{{{payload.resourcesURL}}}/logos/favicon.ico\"/>\n<link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css\" rel=\"stylesheet\"/>\n</head>\n<body>\n<div class=\"container\">\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12 well\" style=\"text-align: center; margin-top: 10px;\">\n\t\t\t<img style=\"max-width: 100%;\" src=\"{{{payload.resourcesURL}}}/modules/restaurantsdemo-app-3.1.png\"/>\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div id=\"restaurants\" class=\"col-md-9\"></div>\n\t\t<div id=\"news\" class=\"col-md-3\"></div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12\" style=\"text-align: center;\"><hr/>&copy; Simplicit&eacute; Software</div>\n\t</div>\n</div>\n<script src=\"https://code.jquery.com/jquery-2.2.4.min.js\"></script>\n<script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js\"></script>\n<script type=\"text/javascript\">\nvar locId = undefined, page = 1;\nfunction restaurants(id, p) {\n    if (id) locId = id;\n    if (p) page = p;\n    $(\"#restaurants\").text(\"Loading...\").load(\"/restaurants\" + (id ? \"?location=\" + id + \"&page=\" + page : \"\"));\n}\nfunction news() { $(\"#news\").text(\"Loading...\").load(\"/news\"); }\n$(document).ready(function() { news(); restaurants(); });\n</script>\n</body>\n</html>\n","x":550,"y":440,"wires":[["6888bd96.affae4"]]},{"id":"6888bd96.affae4","type":"http response","z":"bf4c7741.bf0e58","name":"","x":750,"y":440,"wires":[]},{"id":"62dd9b79.f971b4","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload = {\n    resourcesURL: \"https://www.simplicite.io/resources/\"\n};\nreturn msg;","outputs":1,"noerr":0,"x":340,"y":440,"wires":[["c53a0f94.db433"]]},{"id":"682f5f1f.cc382","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/restaurants","method":"get","swaggerDoc":"","x":100,"y":600,"wires":[["81df0ddd.1d95e","23aee945.9a28f6"]]},{"id":"4de8b793.4d25d8","type":"http response","z":"bf4c7741.bf0e58","name":"","x":1170,"y":600,"wires":[]},{"id":"50e280f3.c708f","type":"template","z":"bf4c7741.bf0e58","name":"restaurants","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<div class=\"row\">\n\t<div class=\"col-md-12\">\n\t\t<h3>{{payload.count}} restaurant(s) found <button class=\"btn btn-xs btn-default pull-right\" onclick=\"restaurants();\"><span class=\"glyphicon glyphicon-transfer\"></span> Change location</button></h3>\n        <p>\n            <button class=\"btn btn-xs\" onclick=\"restaurants({{payload.filters.rstRstLocId}}, Math.max({{payload.page}} - 1, 1));\">&lt;</button>\n            page {{payload.page}} / {{payload.maxpage}}\n            <button class=\"btn btn-xs\" onclick=\"restaurants({{payload.filters.rstRstLocId}}, Math.min({{payload.page}} + 1, {{payload.maxpage}}));\">&gt;</button>\n        </p>\n\t</div>\n{{#payload.list}}\n\t<div class=\"col-md-12\">\n\t\t<div class=\"panel panel-success\">\n\t\t\t<div class=\"panel-heading\"><h4><span class=\"glyphicon glyphicon-home\"></span> {{rstRstName}}<sup>&nbsp;<span class=\"label label-primary\">{{rstRstCuisine}}</span></sup></h4></div>\n\t\t\t<div class=\"panel-body\">\n\t\t\t\t<div>\n    \t\t\t\t{{#rstRstPicture}}\n    \t\t\t\t<img src=\"data:{{mime}};base64,{{thumbnail}}\" style=\"margin: 5px; float: left;\"/>\n    \t\t\t\t{{/rstRstPicture}}\n    \t\t\t\t<p>{{rstRstAddress}}<br/>Rating <b>{{rstRstRating}} %</b> based on <b>{{rstRstNbComments}}</b> comment(s)</p>\n    \t\t\t\t<p></p><button class=\"btn btn-xs\" onclick=\"map('{{rstRstCoordinates}}')\"><span class=\"glyphicon glyphicon-globe\"></span> Map</button>\n    \t\t\t\t&nbsp;<button class=\"btn btn-success btn-xs\" onclick=\"comments({{row_id}})\"><span class=\"glyphicon glyphicon-comment\"></span> Comments</button>\n    \t\t\t\t<br/>{{{rstRstDescription}}}</p>\n    \t\t\t\t<div class=\"label label-info\">{{rstRst}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{{/payload.list}}\n</div>\n<div class=\"modal fade bs-example-modal-md\" id=\"map-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"map-modal-label\">\n  <div class=\"modal-dialog modal-md\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n        <h4 class=\"modal-title\" id=\"map-modal-label\">Map</h4>\n      </div>\n      <div class=\"modal-body\">\n          <div id=\"map-modal-body\" style=\"text-align: center; overflow: auto;\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"modal fade bs-example-modal-md\" id=\"comments-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"comments-modal-label\">\n  <div class=\"modal-dialog modal-md\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n        <h4 class=\"modal-title\" id=\"comments-modal-label\">Comments</h4>\n      </div>\n      <div class=\"modal-body\" id=\"comments-modal-body\">\n\t\t<form id=\"comments-form\" style=\"clear: both;\">\n\t        <input type=\"hidden\" id=\"comments-restaurant\" name=\"rstCmtRstId\"/>\n            <div class=\"form-group\">\n                <label for=\"comments-email\">Your email:</label>\n                <input type=\"email\" class=\"form-control\" id=\"comments-email\" name=\"rstCmtEmail\">\n            </div>\n            <div class=\"form-group\">\n                <label for=\"comments\">Your comments:</label>\n                <textarea rows=\"5\" class=\"form-control\" id=\"comments-comments\" name=\"rstCmtComments\"></textarea>\n            </div>\n\t\t</form>\n        <button type=\"button\" id=\"comments-submit\" class=\"btn btn-primary\" onclick=\"sendcomments()\">Send</button>\n\t\t<h3>Other comments:</h3>\n        <div id=\"comments-all\" style=\"max-height: 300px; overflow: auto;\"></div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<script type=\"text/javascript\">\npage = {{payload.page}};\nfunction map(c) {\n    $(\"#map-modal-body\").empty().append($(\"<img/>\", { src: \"https://maps.googleapis.com/maps/api/staticmap?center=\" + c + \"&size=500x400&zoom=13&markers=\" + c + \"&key=AIzaSyABNE2cXhg1s0fKmHrDjgizmEvDDygJk_A\" }));\n    $(\"#map-modal\").modal(\"show\");\n}\nfunction comments(id) {\n    $(\"#comments-restaurant\").val(id);\n    $(\"#comments-all\").load(\"comments?restaurant=\" + id);\n    $(\"#comments-modal\").modal(\"show\");\n}\nfunction sendcomments() {\n    $.post(\"comments\", $(\"#comments-form\").serialize()).done(function(res) {\n        console.log(res);\n        if (res.error)\n            alert(res.error.message.messages[0]);\n        else\n            $(\"#comments-modal\").modal(\"hide\").on('hidden.bs.modal', function () { restaurants(locId); });\n    });\n}\n</script>","x":970,"y":640,"wires":[["4de8b793.4d25d8"]]},{"id":"6a761cf7.0c0e94","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/comments","method":"post","swaggerDoc":"","x":100,"y":840,"wires":[["53a6b28f.c4391c","2ceb69e5.3aadf6","a639a834.07ff88"]]},{"id":"aafbb2a5.27d99","type":"http response","z":"bf4c7741.bf0e58","name":"","x":1290,"y":840,"wires":[]},{"id":"f51e8965.2bcc28","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload.rstRstSentiment = msg.sentiment.score;\nmsg.payload = { item: msg.payload };\nreturn msg;","outputs":1,"noerr":0,"x":940,"y":840,"wires":[["3ad599e4.74cbb6"]]},{"id":"3ad599e4.74cbb6","type":"simplicite-object","z":"bf4c7741.bf0e58","name":"","server":"27652a29.8ec866","objectname":"RstComments","action":"create","x":1120,"y":840,"wires":[["de275449.4fdbb8","aafbb2a5.27d99"]]},{"id":"53a6b28f.c4391c","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":110,"y":920,"wires":[]},{"id":"ed4c9c9d.ccdb3","type":"simplicite-object","z":"bf4c7741.bf0e58","name":"","server":"27652a29.8ec866","objectname":"RstRestaurant","action":"search","x":760,"y":640,"wires":[["43e4c3e4.4801ec","50e280f3.c708f"]]},{"id":"5d489087.93296","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload = {\n\tparameters: {\n\t\tinlineThumbs: true,\n\t\tpage: msg.payload.page ? msg.payload.page : 1\n\t},\n\tfilters: { rstRstLocId: msg.payload.location }\n};\nreturn msg","outputs":1,"noerr":0,"x":540,"y":640,"wires":[["ed4c9c9d.ccdb3","3767878.35adf78"]]},{"id":"43e4c3e4.4801ec","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"payload","x":810,"y":700,"wires":[]},{"id":"de275449.4fdbb8","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":1230,"y":900,"wires":[]},{"id":"bd3ad50a.829688","type":"simplicite-object","z":"bf4c7741.bf0e58","name":"","server":"27652a29.8ec866","objectname":"RstLocation","action":"search","x":690,"y":560,"wires":[["e6725870.3b84f8","496384c7.1dbc5c"]]},{"id":"e6725870.3b84f8","type":"template","z":"bf4c7741.bf0e58","name":"locations","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<h3>Locations</h3>\n<div class=\"form-group\">\n    <label for=\"location-selector\">Select location:</label>\n    <select class=\"form-control\" id=\"location-selector\">\n        <option value=\"\" selected=\"selected\"></option>\n    {{#payload.list}}\n\t    <option value=\"{{row_id}}\">{{rstLocName}}</option>\n    {{/payload.list}}\n    </select>\n</div>\n<script type=\"text/javascript\">$(\"#location-selector\").change(function() { restaurants($(this).val(), 1); });</script>","x":920,"y":560,"wires":[["4de8b793.4d25d8"]]},{"id":"496384c7.1dbc5c","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":770,"y":500,"wires":[]},{"id":"81df0ddd.1d95e","type":"switch","z":"bf4c7741.bf0e58","name":"location","property":"payload.location","propertyType":"msg","rules":[{"t":"null"},{"t":"nnull"}],"checkall":"true","outputs":2,"x":300,"y":600,"wires":[["bd3ad50a.829688"],["5d489087.93296"]]},{"id":"23aee945.9a28f6","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":190,"y":660,"wires":[]},{"id":"3767878.35adf78","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":590,"y":700,"wires":[]},{"id":"85697495.19d268","type":"sentiment","z":"bf4c7741.bf0e58","name":"","x":480,"y":920,"wires":[["28dd0da9.2cc662","8ae5baad.482f48"]]},{"id":"28dd0da9.2cc662","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"sentiment","x":560,"y":980,"wires":[]},{"id":"2ceb69e5.3aadf6","type":"function","z":"bf4c7741.bf0e58","name":"comments","func":"msg.payload = msg.payload.rstCmtComments;\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":920,"wires":[["85697495.19d268"]]},{"id":"a639a834.07ff88","type":"join","z":"bf4c7741.bf0e58","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","timeout":"","count":"2","x":790,"y":840,"wires":[["f51e8965.2bcc28","c8273bea.eae7b8"]]},{"id":"8ae5baad.482f48","type":"function","z":"bf4c7741.bf0e58","name":"score","func":"msg.payload = { rstCmtSentiment: msg.sentiment.score }\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":920,"wires":[["a639a834.07ff88"]]},{"id":"c8273bea.eae7b8","type":"debug","z":"bf4c7741.bf0e58","name":"","active":false,"console":"false","complete":"false","x":940,"y":900,"wires":[]},{"id":"bf5fe9f6.30f2a8","type":"http response","z":"bf4c7741.bf0e58","name":"","x":870,"y":780,"wires":[]},{"id":"2b76d282.ae4ede","type":"http in","z":"bf4c7741.bf0e58","name":"","url":"/comments","method":"get","swaggerDoc":"","x":100,"y":780,"wires":[["1d2027d0.aa0c18"]]},{"id":"50f7f742.187a48","type":"simplicite-object","z":"bf4c7741.bf0e58","name":"","server":"27652a29.8ec866","objectname":"RstComments","action":"search","x":500,"y":780,"wires":[["2b4c39fb.1857a6"]]},{"id":"2b4c39fb.1857a6","type":"template","z":"bf4c7741.bf0e58","name":"comments","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{#payload.list}}\n<p><span style=\"color: #A0A0A0;\">{{rstCmtDateTime}} by {{rstCmtEmail}}:</span><br/><span class=\"badge\">{{rstCmtEval}} %</span> {{rstCmtComments}}</p>\n{{/payload.list}}\n{{^payload.list}}\nNo other comments so far...\n{{/payload.list}}\n","x":710,"y":780,"wires":[["bf5fe9f6.30f2a8"]]},{"id":"1d2027d0.aa0c18","type":"function","z":"bf4c7741.bf0e58","name":"params","func":"msg.payload = {\n    filters: { rstCmtRstId: msg.payload.restaurant }\n};\nreturn msg","outputs":1,"noerr":0,"x":300,"y":780,"wires":[["50f7f742.187a48"]]},{"id":"6c21fa80.1abd34","type":"simplicite-config","z":"bf4c7741.bf0e58","name":"designer","user":"designer","password":"S1mplicite_","host":"dev31.apps.simplicite.io","port":"443","scheme":"https","root":"","debug":"false"},{"id":"27652a29.8ec866","type":"simplicite-config","z":"bf4c7741.bf0e58","name":"public","user":"public","password":"simplicite","host":"dev31.apps.simplicite.io","port":"443","scheme":"https","root":"","debug":"false"}]